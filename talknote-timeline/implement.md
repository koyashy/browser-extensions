# 実装

## 機能
- 通知を先読みして投稿内容とコメントをページ内に展開する（先読み機能）
- お知らせページを表示中にのみ、先読み機能を動作させる
- 新しい通知が読み込まれたら、先読み機能を動作させる
- コメントが多い場合は、新しいものを10件残して折りたたむ

- ホームリンクのリンク先をお知らせページにする
- タイトルを拡張機能とわかる表示にする
- 全て既読にする機能

## クラス構造
- アプリケーション：表示中のページを識別して、適切な機能が動作するようにする
    - ホームリンク
- 通知コンテナ：通知を管理する
    - タイトル
    - 既読ボタン
- 通知：通知そのもの。先読み機能の本体
- API：トークノートのAPIをラップする
- DOM操作：HTMLに依存する操作を行う
- ブラウザ依存

## ブラウザ依存の機能による処理の違い
Chromeの場合、お知らせページヘの遷移をフックして、先読み機能を発動する。  
Safariの場合、お知らせページを表示しているかどうかをタイマー起動で確認し、先読み機能を発動する。

## テスト
テストフレームワークはJasmine。CoffeeScriptで書いたテストを、karmaからPhantomJS上で実行する。拡張機能自体のコード（テスト対象コード）はECMAScript2015で書いているため、PhantomJSで実行できるようにBabelでトランスパイルしている。

# ビルド
ECMAScript2015は、Chromeではほぼそのまま機能するが、Safariではまるで機能しない。Gulpでブラウザ別にBabelやminifyを実行するように設定している。
